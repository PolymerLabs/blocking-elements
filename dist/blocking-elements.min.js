!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var t,n,o,r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=Symbol(),y=Symbol(),m=Symbol(),p=Symbol(),c=Symbol(),a=Symbol(),u=Symbol(),s=Symbol(),d=Symbol(),h=Symbol(),f=Symbol(),b=Symbol(),g=Symbol(),e=function(){function e(){r(this,e),this[t]=[],this[n]=[],this[o]=new Set}return i(e,[{key:"destructor",value:function(){this[d](this[m]);var e=this;e[l]=null,e[m]=null,e[y]=null}},{key:"push",value:function(e){e&&e!==this.top&&(this.remove(e),this[a](e),this[l].push(e))}},{key:"remove",value:function(e){var t=this[l].indexOf(e);if(-1===t)return!1;if(this[l].splice(t,1),t===this[l].length){var n=this.top;null!==n&&this[a](n)}return!0}},{key:"pop",value:function(){var e=this.top;return e&&this.remove(e),e}},{key:"has",value:function(e){return-1!==this[l].indexOf(e)}},{key:(t=l,n=m,o=y,a),value:function(e){var t=this[y],n=this[m];if(!e)return this[d](n),t.clear(),void(this[m]=[]);var o=this[h](e);if(o[o.length-1].parentNode!==document.body)throw Error("Non-connected element cannot be a blocking element");this[m]=o;var r=this[f](e);if(n.length){for(var i=n.length-1,l=o.length-1;0<i&&0<l&&n[i]===o[l];)i--,l--;n[i]!==o[l]&&this[u](n[i],o[l]),0<i&&this[d](n.slice(0,i)),0<l&&this[s](o.slice(0,l),r,null)}else this[s](o,r,t)}},{key:u,value:function(e,t){var n=e[p];this[b](e)&&!e.inert&&(e.inert=!0,n&&n.add(e)),n&&n.has(t)&&(t.inert=!1,n.delete(t)),t[c]=e[c],e[c]=void 0,t[p]=n,e[p]=void 0}},{key:d,value:function(e){e.forEach(function(e){var t=e[c];void 0!==t&&t.disconnect(),e[c]=void 0;var n=e[p];if(void 0!==n){var o=!0,r=!1,i=void 0;try{for(var l,a=n[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){l.value.inert=!1}}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}}e[p]=void 0})}},{key:s,value:function(e,t,n){var o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){for(var u=l.value,s=null!==u.parentNode?u.parentNode.children:[],d=new Set,h=0;h<s.length;h++){var f=s[h];f===u||!this[b](f)||t&&t.has(f)||(n&&f.inert?n.add(f):(f.inert=!0,d.add(f)))}u[p]=d,u[c]=new MutationObserver(this[g].bind(this));var v=u[c];null!==u.parentNode&&void 0!==v&&v.observe(u.parentNode,{childList:!0})}}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}}},{key:g,value:function(e){var t=this[m],n=this[y],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){for(var u=l.value,s=t[(u.target===document.body?t.length:t.indexOf(u.target))-1],d=s[p],h=0;h<u.removedNodes.length;h++){var f=u.removedNodes[h];if(f===s)return console.info("Detected removal of the top Blocking Element."),void this.pop();d&&d.has(f)&&(f.inert=!1,d.delete(f))}for(var v=0;v<u.addedNodes.length;v++){var c=u.removedNodes[v];this[b](c)&&(n&&c.inert?n.add(c):(c.inert=!0,d&&d.add(c)))}}}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}}},{key:b,value:function(e){return!1===/^(style|template|script)$/.test(e.localName)}},{key:h,value:function(e){for(var t=[],n=e;n&&n!==document.body;)if(n.nodeType===Node.ELEMENT_NODE&&t.push(n),n.assignedSlot){for(;n=n.assignedSlot;)t.push(n);n=t.pop()}else n=n.parentNode||n.host;return t}},{key:f,value:function(e){var t=e.shadowRoot;if(!t)return null;var n=new Set,o=void 0,r=void 0,i=void 0,l=t.querySelectorAll("slot");if(l.length&&l[0].assignedNodes)for(o=0;o<l.length;o++)for(i=l[o].assignedNodes({flatten:!0}),r=0;r<i.length;r++)i[r].nodeType===Node.ELEMENT_NODE&&n.add(i[r]);return n}},{key:"top",get:function(){var e=this[l];return e[e.length-1]||null}}]),e}();document.$blockingElements=new e});
