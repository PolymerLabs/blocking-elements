!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var E,n,w,x,D,h,r,a,s,u,f,d,O,c,e,t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();
/**
 * @license
 * Copyright 2016 Google Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
E=document,n=Symbol(),w=Symbol(),x=Symbol(),D=Symbol(),h=Symbol(),r=Symbol(),a=Symbol(),s=Symbol(),u=Symbol(),f=Symbol(),d=Symbol(),O=Symbol(),c=Symbol(),e=function(){function e(){t(this,e),this[n]=[],this[x]=[],this[w]=new Set}return o(e,[{key:"destructor",value:function(){this[u](this[x]),this[n]=null,this[x]=null,this[w]=null}},{key:"push",value:function(e){e&&e!==this.top&&(this.remove(e),this[r](e),this[n].push(e))}},{key:"remove",value:function(e){var t=this[n].indexOf(e);return-1!==t&&(this[n].splice(t,1),t===this[n].length&&this[r](this.top),!0)}},{key:"pop",value:function(){var e=this.top;return e&&this.remove(e),e}},{key:"has",value:function(e){return-1!==this[n].indexOf(e)}},{key:r,value:function(e){var t=this[w],n=this[x];if(!e)return this[u](n),t.clear(),void(this[x]=[]);var r=this[f](e);if(r[r.length-1].parentNode!==E.body)throw Error("Non-connected element cannot be a blocking element");this[x]=r;var o=this[d](e);if(n.length){for(var i=n.length-1,l=r.length-1;0<i&&0<l&&n[i]===r[l];)i--,l--;n[i]!==r[l]&&this[a](n[i],r[l]),0<i&&this[u](n.slice(0,i)),0<l&&this[s](r.slice(0,l),o)}else this[s](r,o,t)}},{key:a,value:function(e,t){var n=e[D];this[O](e)&&!e.inert&&(e.inert=!0,n.add(e)),n.has(t)&&(t.inert=!1,n.delete(t)),t[h]=e[h],e[h]=null,t[D]=n,e[D]=null}},{key:u,value:function(e){e.forEach(function(e){e[h].disconnect();var t=!(e[h]=null),n=!1,r=void 0;try{for(var o,i=e[D][Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.inert=!1}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}e[D]=null})}},{key:s,value:function(e,t,n){for(var r=0,o=e.length;r<o;r++){for(var i=e[r],l=i.parentNode.children,a=new Set,s=0;s<l.length;s++){var u=l[s];u===i||!this[O](u)||t&&t.has(u)||(n&&u.inert?n.add(u):(u.inert=!0,a.add(u)))}i[D]=a,i[h]=new MutationObserver(this[c].bind(this)),i[h].observe(i.parentNode,{childList:!0})}}},{key:c,value:function(e){var t=this[x],n=this[w],r=!0,o=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value,u=t[(s.target===E.body?t.length:t.indexOf(s.target))-1],h=u[D],f=!0,d=!1,c=void 0;try{for(var v,y=s.removedNodes[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var p=v.value;if(p===u)return console.info("Detected removal of the top Blocking Element."),void this.pop();h.has(p)&&(p.inert=!1,h.delete(p))}}catch(e){d=!0,c=e}finally{try{!f&&y.return&&y.return()}finally{if(d)throw c}}var b=!0,g=!1,m=void 0;try{for(var S,N=s.addedNodes[Symbol.iterator]();!(b=(S=N.next()).done);b=!0){var k=S.value;this[O](k)&&(n&&k.inert?n.add(k):(k.inert=!0,h.add(k)))}}catch(e){g=!0,m=e}finally{try{!b&&N.return&&N.return()}finally{if(g)throw m}}}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}}},{key:O,value:function(e){return!1===/^(style|template|script)$/.test(e.localName)}},{key:f,value:function(e){for(var t=[],n=e;n&&n!==E.body;)if(n.nodeType===Node.ELEMENT_NODE&&t.push(n),n.assignedSlot){for(;n=n.assignedSlot;)t.push(n);n=t.pop()}else{var r=n.getDestinationInsertionPoints?n.getDestinationInsertionPoints():[];if(r.length){for(var o=0;o<r.length;o++)t.push(r[o]);n=t.pop()}else n=n.parentNode||n.host}return t}},{key:d,value:function(e){var t=e.shadowRoot;if(!t)return null;var n=new Set,r=void 0,o=void 0,i=void 0,l=t.querySelectorAll("slot");if(l.length&&l[0].assignedNodes){for(r=0;r<l.length;r++)for(i=l[r].assignedNodes({flatten:!0}),o=0;o<i.length;o++)i[o].nodeType===Node.ELEMENT_NODE&&n.add(i[o]);return n}var a=t.querySelectorAll("content");if(a.length&&a[0].getDistributedNodes)for(r=0;r<a.length;r++)for(i=a[r].getDistributedNodes(),o=0;o<i.length;o++)i[o].nodeType===Node.ELEMENT_NODE&&n.add(i[o]);return n}},{key:"top",get:function(){var e=this[n];return e[e.length-1]||null}}]),e}(),E.$blockingElements=new e});
